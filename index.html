<!DOCTYPE html>
<html lang=es-es>
  <meta charset=utf-8>
  <title>Predicción de series temporales</title>
  <meta name=viewport content="width=device-width">
  <meta name="duration" content="45" />
  <link rel=stylesheet href="assets/css/simple.css">
  <script src="assets/js/b6plus.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Rubik:ital,wght@0,400;0,600;1,400;1,600&family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">


<!--
  Slide transitions =========================  
fade-in
    The new slide appears faint at first and gets more opaque until it completely obscures the previous slide.
slide-in
    The new slide moves in from the left, while the previous slide moves back to the left.
move-left
    The new slides move in from the right while the old slide moves out to the left.
move-up
    The old slide moves up and the new slide moves in from the bottom.
flip-up
    A 3D effect: the bottom of the old slide is lifted up and the slide is turned over to reveal the new slide on its back side.
flip-left
    Another 3D effect, but in this case the right side of the slide is lifted up and the slide is flipped over to the left, revealing the new slide on the back side.
center-out
    A small circle appears in the middle of the old slide that reveals the new slide. The circle grows until it covers the whole slide.
wipe-left
    The new slide moves in from the right, until it covers the old slide.
zigzag-left
    A zigzag pattern moves in from the right. To the left is the old slide, to the right the new one.
zigzag-right
    A zigzag pattern moves in from the left. To the left is the new slide, to the right the old one.
cut-in
    The new slide moves in from the top left and covers the old slide. 
-->


 <body class="fade-in hidemouse=1.5">

  <div class=progress></div> <!-- progress bar -->

  <section role=region aria-live=assertive>
    <!-- What a screen reader should say on leaving slide mode,
	 instead of the default ‘Stopped.’ -->
    Leaving presentation mode.
  </section>

  <section class="comment small timer">
    <span class="timer-text"></span>
    <button class="timer-start">Empezar</button>
  </section>
  <script>
    let time_mins = 50
    let setMins = function(){
      document.querySelector(".timer-text").textContent = `${time_mins} min. restantes`;
      time_mins -= 1;
    }
    setMins()
    document.querySelector(".timer-start").addEventListener("click", function(){
      this.style.display = "none";
      setInterval(setMins, 60000)
    });
    
  </script>

  <section class="comment small">

    Para iniciar la presentación, haz <a href="?full">clic aquí</a> o <b>doble clic</b> en cualquiera de las diapositivas. Para navegar por las diapositivas, puedes utilizar las flechas del teclado.
    <p>
      Esta presentación ha sido compuesta utilizando el <a href="https://www.w3.org/Talks/Tools/b6plus/">motor B6+ del W3C</a>, a partir del <a href="https://github.com/fdavidcl/defensa">código fuente en GitHub</a> proporcionado por David Charte (¡Gracias!). Ajustes realizados por Manuel Germán.
    </p>
    <p>
      Puedes contactar conmigo mediante correo <a href="mailto:mgerman@ujaen.es" >&lt;mgerman@ujaen.es&gt;</a> o mediante RRSS: X (anteriormente Twitter) <a href="https://twitter.com/mgermanm0" target="_blank"> @mgermanm0</a> o LinkedIn <a href="https://www.linkedin.com/in/mgermanm/" target="_blank">Manuel G.</a>
    </p>
    <p>
      ¡Te invito también a seguir a <a href="https://www.linkedin.com/company/simidat/" target="_blank">SiMiDat en LinkedIn</a> para enterarte de todo lo que hacemos!
    </p>
  </section>

  <section class="cover slide clear titleslide flex" id=cover>
    <div class="left-side vertical-logo">
        <span></span>
        <img src="images/logo_simidat.png">
    </div>
    <div class="right-side">
      <img class="cover less-bright" src="images/ts_bg.jpg"/>
      <h1 style="line-height: 1.8em;">
        Introducción al<br>
        <span class="largest"><i>Análisis de series temporales</i></span>
      </h1>
      <p class="subtitle">Predicción de [temática aquí]<br>Minería de Datos - Curso 2024/2025</p>
      <p class="institution">Grupo de investigación de Sistemas Inteligentes y Minería de Datos</p>
      <p class="subtitle">SiMiDat</p><br>&nbsp;
      <p class="author">Manuel Germán Morales
        <a href="mailto:mgerman@ujaen.es" >&lt;mgerman@ujaen.es&gt;</a></p>
      <p class=note>12 de noviembre de 2024<br>
    </div>
  </section>

  <section class="slide clear" id="toc">
    <h1>Índice</h1>
    <ol class="maketoc"></ol>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <div class="box next">Sigue la presentación en <a href="https://mgermanm0.github.io/ts-intro/">mgermanm0.github.io/ts-intro</a></div>
  </section>

  <section class="cover slide clear " id="intro">
    <img class="cover" src="images/ts_bg.jpg"
    alt="Landscape loss" />
    <h1>Introducción a las series temporales</h1>
  </section>
  
  
  <section id="motivación" class="slide">
    <h1>¿Por qué es interesante el TSA?</h1>
    <div class="box next secondary">Las series temporales están presentes en una gran cantidad de dominios</div>
    <div class="next">
      <h3>Algunos ejemplos...</h3>
      <ul class="incremental" style="max-width: 25em; margin-left: auto; margin-right: auto;">
        <li>Consumo energético</li>
        <li>Ocupación de una carretera</li>
        <li>Meteorología: Temperatura, litros de lluvia...</li>
        <li>Producción y demanda de productos</li>
      </ul>
    </div>
    <p class="next">¿Y qué tienen en común todas las mediciones procedentes de estos dominios?</p>
    <div class="box next primary next">Presentan <h3>dependencias temporales</h3></div>


  </section>

<section class="slide" id="moti2">
  <h1>¿Qué es una serie temporal?</h1>
  <div class="box next">Una <strong>serie temporal</strong> no es nada más que un conjunto de <strong>observaciones</strong> medidas con una <strong>frecuencia</strong> ordenadas a lo largo del <strong>tiempo</strong></div>
  <div class="next"><p>Podemos expresar una serie temporal \(S\) de la siguiente forma.</p>
  <div>$$S = \{x_0, x_1, x_2, ..., x_t\}$$</div></div>
  <div class="next">
    <p>Donde:</p>
    <ul>
      <li>\(x_0, x_1, x_2, ..., x_t\) son las <strong>observaciones</strong> recogidas a lo largo del tiempo (\(t\)). Una observación puede contener <strong>una</strong> medición o <strong>varias</strong> mediciones.</li>
    </ul>
  </div>
  <img style="height: 35%;" class="next" src="images/ts.png">
</section>

<section class="slide" id="moti2">
  <h1>Patrones de una serie temporal</h1>
  A la hora de describir una serie, usaremos palabras cómo <strong>tendencia</strong>, <strong>estacionalidad</strong> y <strong>ciclicidad</strong>.
  <h2>Tendencia</h2>
  Responde a la pregunta <strong>¿Cómo se comportan los datos a largo plazo?</strong>
  <img class="next" src="images/ts_trend.png">
</section>

<section class="slide" id="moti2">
  <h1>Patrones de una serie temporal</h1>
  A la hora de describir una serie, usaremos palabras cómo <strong>tendencia</strong>, <strong>estacionalidad</strong> y <strong>ciclicidad</strong>.
  <h2>Estacionalidad</h2>
  Responde a la pregunta <strong>¿Qué patrones recurrentes se observan en los datos?</strong>
  <img class="next" src="images/ts_seasonality.png">
  <div class="box secondary next"><strong>¡OJO!</strong> Se habla de estacionalidad cuando estos patrones siguen <strong>siempre una misma frecuencia y duración.</strong></div>
</section>

<section class="slide" id="moti2">
  <h1>Patrones de una serie temporal</h1>
  A la hora de describir una serie, usaremos palabras cómo <strong>tendencia</strong>, <strong>estacionalidad</strong> y <strong>ciclicidad</strong>.
  <h2>Ciclicidad</h2>
  Responde a la pregunta <strong>¿Qué fluctuaciones en los datos ocurren de forma irregular?</strong><br><br>
  <div class="box primary next">Los <strong>ciclos</strong> NO tienen una frecuencia fija, pero suelen estar relacionados con fenómenos más amplios, como ciclos económicos.</div>
</section>

<section class="slide" id="moti2">
  <h1>Ciclicidad y estacionalidad</h1>
  <img src="images/ts_cyclic.png">
  <p class="next">¿Puedes determinar el <strong>efecto estacional</strong> y los <strong>ciclos</strong> presentes en esta serie?</p>
</section>

<section class="slide" id="moti2">
  <h1>Ciclicidad y estacionalidad</h1>
  <img src="images/ts_cyclic_tag.png">
  <p>Existen <strong>3 ciclos</strong> en esta serie. Podemos ver que el primero tiene una duración mucho mayor que los otros dos y que ambos se comportan igual.</p>
  <div class="box primary next">La ciclicidad es <strong>dificil</strong> de extraer y modelar, a diferencia de la <strong>estacionalidad</strong></div>
</section>

<section class="slide" id="moti2">
  <h1>Estacionariedad</h1>
  <p>Es una propiedad <strong>muy interesante</strong> y que conviene <strong>mantenerla o conseguirla</strong>.</p>
  <div class="box primary next">Una serie es <strong>estacionaria</strong> si sus propiedades estadísticas <strong>no</strong> dependen del tiempo.</div>
  <p>Dos tipo de estacionariedad:</p>
  <ul class="incremental" style="max-width: 25em; margin-left: auto; margin-right: auto;">
    <li><strong>Fuerte</strong>, si <strong>todas</strong> las propiedades se mantienen a lo largo del tiempo.</li>
    <li><strong>Débil</strong>, si solo la <strong>media y varianza</strong> se mantienen a lo largo del tiempo.</li>
  </ul>
  <div class="box secondary">La <strong>estacionalidad fuerte</strong> es muy difícil de conseguir.</div>
</section>

<section class="slide" id="moti2">
  <h1>Estacionariedad</h1>
  <p>¿Es estacionaria? ¿Fuerte o debil? (Pista: Observa los recuadros rojos)</p>
  <img style="height: 75%;" src="images/estacionaria-no.png">
</section>

<section class="slide" id="moti2">
  <h1>Estacionariedad</h1>
  <p>¿Es estacionaria? ¿Fuerte o debil?</p>
  <img style="height: 75%;" src="images/estacionaria-debil.png">
</section>


  <section class="slide cover clear" id="d1">
    <img class="cover" src="images/ts_bg.jpg"
    alt="Abstract nodes and connections" />
    <div>
      <div class="flex">
        <h1>Análisis exploratorio y preprocesamiento</h1>
      </div>
    </div>
  </section>

  <section class="slide" id="moti2">
    <h1>Propiedades de una serie</h1>
    <p>A diferencia de otros tipos de datos... ¿Qué es lo que diferencia a las <strong>series temporales</strong>?</p>
    <p class="next">Es necesario tener en cuenta las <strong>dependencias temporales</strong> que presentan las observaciones.</p>
    <p class="next">¿Podremos usar técnicas de análisis que <strong>no consideren</strong> el orden de nuestras mediciones?</p>
    <div class="box next"><h3>SI</h3>Podemos usarlas. ¡La descripción básica de los datos se sigue haciendo con estadísticos univariables! Sin embargo, es necesario <i>mejorar</i> otras técnicas y usar test estadísticos específicos para datos secuenciales.</div>
  </section>
  
  <section class="slide" id="d2">
    <h1>Primer contacto</h1>
    <p>Como primer acercamiento a conocer nuestros datos, podemos obtener características como la <strong>media</strong>, <strong>mediana</strong>, <strong>desviación</strong> y los <strong>cuartiles</strong>.</p>
    <p>Adicionalmente, podemos <strong>graficar</strong> nuestra serie e incluso elaborar un <strong>diagrama de bigotes</strong> para detectar valores anómalos. También puede servir un <strong>historgrama</strong>.</p>
    <p>Es importante determinar si la serie presenta <strong>tendencia</strong>, <strong>estacionalidad</strong> y <strong>estacionariedad</strong></p>
    <p>Y, por último, responder a la pregunta: <strong>¿Qué observaciones son las más interesantes?</strong></p>
    <div class="box secondary">¿Cómo lo hacemos?</div>
  </section>

  <section class="slide" id="d3">
    <h1>Descomposición de una serie temporal</h1>
    <p>Una serie temporal \(S\) se puede expresar como una <strong>combinación de sus características</strong>. La más común es la descomposición STL.</p>
    <div>$$S = T_S \circ E_S \circ R_S$$</div></div>
    <p>Donde:</p>
    <ul class="incremental" style="max-width: 25em; margin-left: auto; margin-right: auto;">
      <li> \(T_S\) es la tendencia de la serie.</li>
      <li> \(E_S\) es su efecto estacional/patrones estacionales.</li>
      <li> \(R_S\) son los residuos, es decir, lo restante.</li>
      <li> \(\circ = \{+,\cdot\}\), operador de composición. Puede ser aditiva o multiplicativa.</li>
    </ul>
    <div class="box secondary">La descomposición STL está basada en la <strong>regresión LOESS/LOWESS</strong>.</div>
  </section>

  <section class="comment small">
    La STL sigue un procedimiento para extraer las propiedades de una serie temporal (tendencia, estacionalidad y residuos) basado en dos procedimientos recursivos.<br>
    <ol>
      <li>Bucle interior: Extrae la tendencia y los patrones estacionales. Usa Regresión LOESS y medias móviles en sus pasos para ello. Primero calcula el componente estacional y luego la tendencia.</li>
      <li>Bucle exterior: Aporta robustez a los resultados del bucle interior. Calcula pesos que son usados en la siguiente ejecución del bucle interior para reducir la influencia de comportamientos anómalos a la hora de calcular la tendencia y la estacionalidad.</li>
    </ol>
    Para saber más: <a href="https://www.wessa.net/download/stl.pdf">Cleveland, R.B. and Cleveland, W.S. (1990) STL: A Seasonal-Trend Decomposition Procedure Based on Loess. Journal of Official Statistics, 6, 3-33. </a>
    <br><br>
    También, decir que un buen método de descomposición (y, como veremos, de predicción), generará unos residuos que siguen una distribución normal. Es decir, que su comportamiento se asimila a un ruido blanco. Si en los residuos detectamos patrones estacionales o tendencias, quiere decir que nuestro método de descomposición (o predicción) no ha sido capaz de extraer toda la información relevante de la serie para cumplir su objetivo.
  </section>

  <section class="slide" id="d4">
    <h1>Suavizado LOESS</h1>
    <div><img style="height: 50%;" src="images/loess.gif"></div>
  </section>

  <section class="slide" id="d5">
    <h1>¿Cómo lograr la estacionareidad?</h1>
    <div class="box primary">Podemos estabilizar las propiedades estadísticas de una serie aplicando <strong>diferenciación</strong>.</div>
    <p>Llamaremos \(S^{n}\) a la serie resultante de aplicar \(n\) diferenciaciones a partir de \(S\).<br>Una diferenciación de <strong>primer orden</strong> se define como \(S^1 = \{(x_i - x_{i-1}) / x_i, x_{i-1} \in S, \forall i \in \{1,2,..., t\}\}\).</p>
    <p>¿Y de <strong>segundo orden</strong>?</p>
    <div>
      \(S^2 = \{(x_i - x_{i-1}) / x_i, x_{i-1} \in S^{1}, \forall i \in \{1,2,..., t-1\}\}\)
    </div>
    <p>¿Y de <strong>orden n</strong>?</p>
    <div>
      \(S^n = \{(x_i - x_{i-1}) / x_i, x_{i-1} \in S^{n-1}, \forall i \in \{1,2,..., t-n-1\}\}\)
    </div><br>
    <div class="box secondary">¿Qué eliminamos en cada diferenciación? ¿Qué ocurre con la longitud de la serie?</div>
  </section>

  <section class="comment small">
    Dato curioso: Si tenemos una serie con patrones recurrentes cada \(k\) observaciones (es decir, posee patrones estacionales) podemos realizar la diferencia entre el instante \(x_i\) y \(x_{i-k}\) para eliminar el efecto de dicho patrón. A esto se le llama <i>Seasonal Differencing</i>.
    $$S^{k}_{seasonal} = \{(x_i - x_{i-k}) / x_i, x_{i-k} \in S, \forall i \in \{k,k+1,..., t\}\}$$
    Eso si, la longitud de la serie resultante se reducirá en \(k\) unidades.
  </section>

  <section class="slide" id="d5">
    <h1>Autocorrelación</h1>
    <br>
    <br>
    <div class="box primary">Se denomina <strong>autocorrelación</strong> al grado de correlación de una misma (o mismas) variable (o variables) entre dos intervalos de tiempo sucesivos.</div>
    <p>En resumen, responde a la pregunta: ¿Cómo de relacionados están <strong>dos instantes</strong> entre si?</p>
    Principalmente, se emplean dos métodos que se complementan entre ellos:
    <div class="flex">
      <div class="box secondary">Función de Autocorrelación<br>(ACF)</div>
      <div class="box secondary">Función de Autocorrelación Parcial (PACF)</div>
    </div>
    <p>Las funciones de autocorrelación suponen que la serie es <strong>estacionaria</strong>.<br><small>Si no la es, es necesario diferenciar...</small></p>
  </section>

  <section class="slide" id="d5">
    <br>
    <h1>Función de Autocorrelación</h1>
    <br>
    <div class="box primary">La Función de Autocorrelación (ACF) mide la correlación de los pasos de una serie temporal consigo misma usando diferentes <strong>retardos</strong> <i>lags</i> \(k\), incluyendo tanto relaciones directas como indirectas.</div>
    <p>Es decir, mide la correlación entre el instante actual \(x_t\) y \(x_{t-k}\), donde \(k=\{0, 1, 2, ..., n\}\)</p>
    <ul>
      <li>Para \(k=0\), la correlación mostrada es \(Corr(x_t, x_t)=1\). Se suele obviar</li>
      <li>Es útil para determinar si una serie se comporta como <strong>ruido</strong>.</li>
      <li>Permite saber si se puede emplear un modelo de <strong>media móvil (MA)</strong>.</li>
    </ul>
    <div class="box secondary">¿Que querrá decir que incluye las relaciones <strong>indirectas</strong>?</div>
  </section>

  <section class="slide" id="d5">
    <br>
    <h1>Función de Autocorrelación Parcial</h1>
    <br>
    <div class="box primary">La Función de Autocorrelación Parcial (PACF) mide la correlación de los pasos de una serie temporal consigo misma usando diferentes <strong>retardos</strong> <i>lags</i> \(k\), incluyendo <strong>SOLO RELACIONES DIRECTAS</strong>.</div>
    <p>Es decir, mide la correlación <strong>directa</strong> entre el instante actual \(x_t\) y \(x_{t-k}\), donde \(k=\{0, 1, 2, ..., n\}\)</p>
    <ul>
      <li>Para \(k=0\), la correlación mostrada es \(Corr(x_t, x_t)=1\). Se suele obviar</li>
      <li>Permite saber si se puede emplear un modelo <strong>autorregresivo (AR)</strong>.</li>
    </ul>
  </section>
  <section class="comment small">
    <ul>
      <li><strong>Tendencia:</strong> La ACF disminuye lentamente con lags crecientes.</li>
      <li><strong>Estacionalidad:</strong> La ACF muestra picos en múltiplos del período estacional.</li>
      <li><strong>Tendencia + Estacionalidad:</strong> La ACF combina una disminución lenta y un patrón ondulado.</li>
    </ul>
  </section>
  


  <section class="slide" id="d5">
    <h1>Test estadísticos útiles</h1>
    
  </section>
  
  <script>
    (function() {
      let toc_slide = document.querySelector(".maketoc")
      let current_section = ""
      let current_section_id = ""
      let slides = document.querySelectorAll(".slide")

      for (let i = 0; i < slides.length; ++i) {
        if (slides[i].classList.contains("cover") && !slides[i].classList.contains("titleslide")) {
          current_section = slides[i].querySelector("h1").textContent;
          current_section_id = slides[i].id;
          if (slides[i].classList.contains("noshow")) continue;
          toc_slide.insertAdjacentHTML('beforeend', `<li><a class=internal href="#${current_section_id}">${current_section}</a></li>`)
        } else if (!slides[i].classList.contains("clear")) {
          slides[i].insertAdjacentHTML('beforeend', `<footer><a class=internal href="#${current_section_id}">${current_section}</a></footer>`)
        }
      }
    })()
  </script>
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>

  <!-- automatically render math in text elements -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
      onload="renderMathInElement(document.body);"></script>
  
      <link rel="stylesheet"
      href="assets/css/nord.min.css">
  <script defer src="assets/js/highlight.min.js"></script>
  
  <script>window.addEventListener("load", function() {hljs.highlightAll();})</script>
 </body>
</html>
